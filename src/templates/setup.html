<!--Telling the browser what type of html it is-->
<!DOCTYPE html>
<!--Creates the html and header-->
<html>
<head>
    <!-- Common head tags -->
    {% include 'partials/head-assets.html' %}

    <!--Makes the name of the web page-->
    <title>Setup</title>

    <style>
        /* Hides the radio button */
        [type='radio'] {
            display: none; 
        }
        /* Show which unit is selected by highlighting the background */
        #units input:checked + label {
            background-color: yellow;
        }
        /* Showing where a unit is by colouring the background */
        .game-board .unit {
            background-color: gray;
        }
        /* Showing when a unit is being moved by colouring the background */
        .game-board .unit.moving {
            background-color: blue;
        }
    </style>    <!--Custom styles for my page-->

<!--Closes the header-->
</head>

<!--Opens body-->
<body>

    <!-- Seperates the columns of the page to layout the different sections -->
    <div class="container">

        <!--Creates a message with a specific font and clour as a heading-->
        <h1 style="color: khaki;">You made it to setup!</h1>

        <!--Creating a link back to the previous page-->
        <form action="/{{previousPage}}" method="post">

            <input type="hidden" name="gameId" value="{{ gameId }}"/>

            <button type="submit">Back</button>

        <!--Closing tags-->
        </form>

        <div class="row">
            <!-- To hold the units that you'll be placing -->
            <div class="col-3">
                 <h2>Units</h2>
                 <div id="units">
                 </div>
            </div>
            <!-- Makes the centre 8 columns of the page dedicated to spacing out the grid to fit in the space provided -->
            <div class="col-6">
                <div class="game-board setup">
                    <table class="table"></table>
                </div>            
            </div>
            <!-- Last column has controls -->
            <div class="col-3">
                <!--Passes the information on which map and what difficulty of robot you will be playing against-->
                <form action="/gameplay" method="post">
                    <input type="hidden" name="game-id" value="{{ gameId }}"/>
                    <input type="hidden" name="random" value="notRandom"/>
                    <!-- Disabled until all ships are placed -->
                    <button id="play" type="submit" disabled="disabled">PLAY!!!!</button>     
                </form>

                <!--This will do the exact same thing as the play button, but will make the user grid random-->
                <form action="/gameplay" method="post">
                    <input type="hidden" name="game-id" value="{{ gameId }}"/>
                    <input type="hidden" name="random" value="random"/>
                    <button id="randomizer" type="submit">Random</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const GRID_SIZE = Number("{{ gridSize }}");   //Passing the python variable gridSize to JavaScript
        const GAME_ID = "{{ gameId }}";     //Passing the python varibale gameId to JavaScript
        
        //Passing the python variable units to JavaScript but using "safe" to prevent HTML escaping and 
        //parsing/tojson to remove editor errors
        const UNITS = JSON.parse(`{{ units|tojson|safe }}`);  
    </script>   
    <!-- Common scripts -->
    {% include 'partials/scripts.html' %}

</body>
</html>
